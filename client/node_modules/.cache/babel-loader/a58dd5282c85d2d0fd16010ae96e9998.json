{"ast":null,"code":"import _objectSpread from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{TextField,Button,Typography,Paper}from\"@material-ui/core\";import FileBase from'react-file-base64';import{useDispatch,useSelector}from\"react-redux\";import useStyles from'./styles.js';import{createPost,updatePost}from'../../actions/posts.js';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Form=function Form(_ref){var _user$result3;var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var _useState=useState({title:'',message:'',tags:'',links:'',selectedFile:''}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var post=useSelector(function(state){return currentId?state.posts.posts.find(function(p){return p._id===currentId;}):null;});var classes=useStyles();var dispatch=useDispatch();var user=JSON.parse(localStorage.getItem('profile'));var navigate=useNavigate();useEffect(function(){if(post)setPostData(post);},[post]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _user$result,_user$result2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(currentId){dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})));clear();}else{dispatch(createPost(_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name})));clear();}case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var clear=function clear(){setCurrentId(null);setPostData({title:'',message:'',tags:'',selectedFile:''});navigate('/');};if(!(user!==null&&user!==void 0&&(_user$result3=user.result)!==null&&_user$result3!==void 0&&_user$result3.name)){return/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:\"Please Sign In\"})});}return/*#__PURE__*/_jsx(Paper,{className:classes.paper,elevation:6,children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\" \",currentId?\"Update\":\"Submit\",\" your Project\"]}),/*#__PURE__*/_jsx(TextField,{name:\"title\",variant:\"outlined\",label:\"Project Name\",fullWidth:true,value:postData.title,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"message\",variant:\"outlined\",label:\"Project Description\",fullWidth:true,value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"tags\",variant:\"outlined\",label:\"Languages Used\",fullWidth:true,value:postData.tags,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(',')}));}}),/*#__PURE__*/_jsx(TextField,{name:\"links\",variant:\"outlined\",label:\"Link\",fullWidth:true,value:postData.links,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{links:e.target.value}));}}),/*#__PURE__*/_jsx(\"div\",{className:classes.fileInput,children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref3){var base64=_ref3.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})}),/*#__PURE__*/_jsx(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true,children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true,children:\"Clear\"})]})});};export default Form;","map":{"version":3,"sources":["/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/src/components/Form/Form.js"],"names":["React","useState","useEffect","TextField","Button","Typography","Paper","FileBase","useDispatch","useSelector","useStyles","createPost","updatePost","useNavigate","Form","currentId","setCurrentId","title","message","tags","links","selectedFile","postData","setPostData","post","state","posts","find","p","_id","classes","dispatch","user","JSON","parse","localStorage","getItem","navigate","handleSubmit","e","preventDefault","name","result","clear","paper","root","form","target","value","split","fileInput","base64","buttonSubmit"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { TextField, Button, Typography, Paper } from \"@material-ui/core\";\nimport FileBase from 'react-file-base64';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport useStyles from './styles.js';\n\nimport {createPost, updatePost} from '../../actions/posts.js'\n import { useNavigate } from \"react-router-dom\";\n\nconst Form = ({currentId, setCurrentId}) => {\n   \n    const [postData, setPostData] = useState({\n     title:'', message:'', tags:'', links:'', selectedFile:''\n    });\n    const post = useSelector((state)=> currentId ? state.posts.posts.find((p)=>p._id === currentId) : null);\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const user = JSON.parse(localStorage.getItem('profile'));\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        if (post) setPostData(post);\n      }, [post]);\n\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n\n        if(currentId){\n         dispatch(updatePost(currentId,{...postData, name: user?.result?.name})); \n         clear();\n        }\n        else{\n        dispatch(createPost({...postData, name: user?.result?.name}));\n        clear();\n        }\n        \n\n    }\n    \n    const clear = () =>{\n        setCurrentId(null);\n        setPostData({\n             title:'', message:'', tags:'', selectedFile:''\n        });\n        navigate('/');\n        \n    }\n\n    if(!user?.result?.name){\n        return (\n            <Paper className = {classes.paper}>\n                <Typography variant = \"h6\" align = \"center\">\n                    Please Sign In\n                </Typography>\n            </Paper>\n        )\n    }\n\n   return( \n   <Paper className={classes.paper} elevation = {6}>\n       <form autoComplete=\"off\" noValidate className={`${classes.root} ${classes.form}`} onSubmit ={handleSubmit} >\n        <Typography variant =\"h6\"> { currentId ? `Update` : `Submit`} your Project</Typography>\n      \n         <TextField \n        name=\"title\"\n        variant = \"outlined\"\n        label = \"Project Name\"\n        fullWidth\n        value = {postData.title}\n        onChange={(e)=> setPostData({ ...postData, title: e.target.value })}\n        />\n         <TextField \n        name=\"message\"\n        variant = \"outlined\"\n        label = \"Project Description\"\n        fullWidth\n        value = {postData.message}\n        onChange={(e)=> setPostData({ ...postData, message: e.target.value })}\n        />\n         <TextField \n        name=\"tags\"\n        variant = \"outlined\"\n        label = \"Languages Used\"\n        fullWidth\n        value = {postData.tags}\n        onChange={(e)=> setPostData({ ...postData, tags: e.target.value.split(',') })}\n        />\n         <TextField \n        name=\"links\"\n        variant = \"outlined\"\n        label = \"Link\"\n        fullWidth\n        value = {postData.links}\n        onChange={(e)=> setPostData({ ...postData, links: e.target.value })}\n        />\n        <div className={classes.fileInput}>\n            <FileBase\n                type = \"file\"\n                multiple = {false}\n                onDone = {({base64}) => setPostData({...postData, selectedFile: base64})}\n            /> \n        </div>\n        <Button className={classes.buttonSubmit} variant = \"contained\" color=\"primary\" size=\"large\" type=\"submit\" fullWidth>\n            Submit\n        </Button>\n        <Button  variant = \"contained\" color=\"secondary\" size=\"small\" onClick={clear} fullWidth>\n            Clear\n        </Button>\n       </form>\n   </Paper>\n   );\n}\nexport default Form;"]},"metadata":{},"sourceType":"module"}
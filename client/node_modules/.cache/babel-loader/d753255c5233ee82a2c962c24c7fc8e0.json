{"ast":null,"code":"import _asyncToGenerator from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useRef}from\"react\";import{Typography,TextField,Button}from\"@material-ui/core\";import{useDispatch}from\"react-redux\";import useStyles from'./styles';import{commentPost}from'../../actions/posts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentsSection=function CommentsSection(_ref){var _user$result;var post=_ref.post;var classes=useStyles();var _useState=useState(post===null||post===void 0?void 0:post.comments),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var dispatch=useDispatch();var user=JSON.parse(localStorage.getItem('profile'));var commentsRef=useRef();var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var finalComment,newComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:finalComment=\"\".concat(user.result.name,\": \").concat(comment);_context.next=3;return dispatch(commentPost(finalComment,post._id));case 3:newComments=_context.sent;setComment('');setComments(newComments);commentsRef.current.scrollIntoView({behavior:'smooth'});case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleClick(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsOuterContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsInnerContainer,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Comments\"}),comments.map(function(c,i){return/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:c.split(': ')[0]}),c.split(':')[1]]},i);}),/*#__PURE__*/_jsx(\"div\",{ref:commentsRef})]}),(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name)&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'70%'},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Write a comment\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,rows:4,variant:\"outlined\",label:\"Comment\",multiline:true,value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'10px'},color:\"primary\",fullWidth:true,disabled:!comment,variant:\"contained\",onClick:handleClick,children:\"Comment\"})]})]})});};export default CommentsSection;","map":{"version":3,"sources":["/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/src/components/PostDetails/CommentSection.jsx"],"names":["React","useState","useRef","Typography","TextField","Button","useDispatch","useStyles","commentPost","CommentsSection","post","classes","comments","setComments","comment","setComment","dispatch","user","JSON","parse","localStorage","getItem","commentsRef","handleClick","finalComment","result","name","_id","newComments","current","scrollIntoView","behavior","commentsOuterContainer","commentsInnerContainer","map","c","i","split","width","e","target","value","marginTop"],"mappings":"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","sourcesContent":["import React, {useState, useRef} from \"react\";\nimport { Typography, TextField, Button } from \"@material-ui/core\";\nimport { useDispatch } from \"react-redux\";\n\nimport useStyles from './styles';\nimport {commentPost} from '../../actions/posts';\n\nconst CommentsSection = ({post}) => {\n    const classes = useStyles();\n    const [comments,setComments] = useState(post?.comments);\n    const [comment,setComment] = useState('');\n    const dispatch = useDispatch();\n    const user = JSON.parse(localStorage.getItem('profile'));\n    const commentsRef = useRef();\n\n    const handleClick = async () =>{\n        const finalComment = `${user.result.name}: ${comment}`;\n        const newComments = await dispatch(commentPost(finalComment, post._id));\n        \n        setComment('');\n        setComments(newComments);\n\n        commentsRef.current.scrollIntoView({behavior:'smooth'});\n    };\n\n    return(\n        <div>\n            <div className = {classes.commentsOuterContainer}>\n                <div className = {classes.commentsInnerContainer}>\n                    <Typography gutterBottom variant = \"h6\">\n                        Comments\n                    </Typography>\n                    {comments.map((c,i)=>(\n                        <Typography key ={i} gutterBottom variant=\"subtitle1\">\n                           <strong>{c.split(': ')[0]}</strong> \n                           {c.split(':')[1]}\n                        </Typography>\n                    ))}\n                    <div ref={commentsRef} />\n                </div>\n                {user?.result?.name && (\n                <div style ={{width: '70%'}}>\n                    <Typography gutterBottom variant = \"h6\">\n                        Write a comment\n                    </Typography>\n                    <TextField\n                    fullWidth\n                    rows={4}\n                    variant=\"outlined\"\n                    label=\"Comment\"\n                    multiline\n                    value = {comment}\n                    onChange = {(e) => setComment(e.target.value)}\n                    />\n                    <Button style ={{marginTop: '10px'}} color=\"primary\" fullWidth disabled={!comment} variant =\"contained\" onClick={handleClick}>\n                        Comment\n                    </Button>\n                </div>\n                )}\n            </div>\n        </div>\n    )\n}\n\nexport default CommentsSection;"]},"metadata":{},"sourceType":"module"}
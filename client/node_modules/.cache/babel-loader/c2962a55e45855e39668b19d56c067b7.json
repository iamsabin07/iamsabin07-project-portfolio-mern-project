{"ast":null,"code":"import _toConsumableArray from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Container,Grow,Grid,Paper,AppBar,Button,TextField}from'@material-ui/core';import{useDispatch}from'react-redux';import{useNavigate,useLocation}from\"react-router-dom\";import ChipInput from'material-ui-chip-input';import Posts from\"../Posts/Posts\";import Form from\"../Form/Form\";import{getPosts,getPostsBySearch}from\"../../actions/posts\";import Auth from'../Auth/Auth';import Pagination from'../Pagination';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useQuery(){return new URLSearchParams(useLocation().search);};var Homepage=function Homepage(){var _user$result,_user$result2,_user$result3;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var user=JSON.parse(localStorage.getItem('profile'));var query=useQuery();var navigate=useNavigate();var page=query.get('page')||0;var searchQuery=query.get('searchQuery');var classes=useStyles();var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var handleAdd=function handleAdd(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDelete=function handleDelete(tagToDelete){return setTags(tags.filter(function(tag){return tag!==tagToDelete;}));};var searchPost=function searchPost(){if(search.trim()||tags.length>0){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));navigate(\"/posts/search?searchQuery = \".concat(searchQuery.search||'none',\" &tags =\").concat(tags.join(',')));}else{navigate('/');}};return/*#__PURE__*/_jsx(Grow,{in:true,children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:9,children:/*#__PURE__*/_jsx(Posts,{setCurrentId:setCurrentId})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:3,children:[!(user!==null&&user!==void 0&&(_user$result=user.result)!==null&&_user$result!==void 0&&_user$result.name)&&/*#__PURE__*/_jsx(Auth,{}),(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name)&&/*#__PURE__*/_jsxs(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsx(TextField,{name:\"search\",variant:\"outlined\",label:\"Search Programmer\",fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/_jsx(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:handleAdd,onDelete:handleDelete,label:\"Search Project by Language\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{onClick:searchPost,variant:\"contained\",className:classes.searchButton,color:\"primary\",children:\"Search\"})]}),(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name)&&/*#__PURE__*/_jsx(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/_jsx(Paper,{className:classes.pagination,elevation:6,children:/*#__PURE__*/_jsx(Pagination,{page:page})})]})]})})});};export default Homepage;","map":{"version":3,"sources":["/Users/sabinthapa/Desktop/project-portfolio-mern-application/client/src/components/Homepage/Homepage.js"],"names":["React","useState","useEffect","Container","Grow","Grid","Paper","AppBar","Button","TextField","useDispatch","useNavigate","useLocation","ChipInput","Posts","Form","getPosts","getPostsBySearch","Auth","Pagination","useStyles","useQuery","URLSearchParams","search","Homepage","currentId","setCurrentId","dispatch","user","JSON","parse","localStorage","getItem","query","navigate","page","get","searchQuery","classes","setSearch","tags","setTags","handleAdd","tag","handleDelete","tagToDelete","filter","searchPost","trim","length","join","gridContainer","result","name","appBarSearch","e","target","value","margin","searchButton","pagination"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { Container, Grow, Grid, Paper, AppBar, Button, TextField} from '@material-ui/core';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport ChipInput from 'material-ui-chip-input';\n\nimport Posts from \"../Posts/Posts\";\nimport Form from \"../Form/Form\";\nimport { getPosts, getPostsBySearch } from \"../../actions/posts\";\nimport Auth from '../Auth/Auth';\nimport Pagination from '../Pagination';\nimport useStyles from './styles';\n\nfunction useQuery(){\n    return new URLSearchParams(useLocation().search);\n};\n\nconst Homepage = () => {\n    const [currentId, setCurrentId] = useState(null);\n    const dispatch = useDispatch();\n    const user = JSON.parse(localStorage.getItem('profile'));\n    const query = useQuery();\n    const navigate = useNavigate();\n    const page = query.get('page') || 0;\n    const searchQuery = query.get('searchQuery');\n    const classes = useStyles();\n    const [search, setSearch] = useState('');\n    const [tags, setTags] = useState([]);\n\n    const handleAdd = (tag) => setTags([...tags, tag]);\n    const handleDelete = (tagToDelete) => setTags(tags.filter((tag) => tag !== tagToDelete));\n\n    const searchPost = () =>{\n        if(search.trim() || tags.length>0) {\n            dispatch(getPostsBySearch({search,tags: tags.join(',') }));\n            navigate(`/posts/search?searchQuery = ${searchQuery.search ||'none'} &tags =${tags.join(',')}`);\n        } else{\n            navigate('/');\n        }\n    }\n    \n    return(\n        <Grow in>\n            <Container maxWidth = \"xl\">\n                <Grid  container justifyContent=\"space-between\" alignItems='stretch' spacing ={3} className={classes.gridContainer}>\n                    <Grid item xs ={12} sm={6} md = {9}>\n                    <Posts setCurrentId = {setCurrentId}/>\n                    </Grid>\n                    <Grid item xs ={12} sm={6} md = {3}>  \n                    {(!user?.result?.name)&& (\n                         <Auth />\n                    )}\n\n                    {(user?.result?.name)&& (\n                        <AppBar className = {classes.appBarSearch} position = \"static\" color = \"inherit\">\n                        <TextField \n                        name=\"search\" \n                        variant=\"outlined\" \n                        label=\"Search Programmer\" \n                        fullWidth value={search} \n                        onChange={(e) => setSearch(e.target.value)} \n                        />\n                            \n                        <ChipInput\n                            style = {{margin : '10px 0'}} \n                            value = {tags}\n                            onAdd = {handleAdd}\n                            onDelete ={handleDelete}\n                            label = \"Search Project by Language\"\n                            variant = \"outlined\"\n                        />\n                        <Button onClick ={searchPost} variant = \"contained\" className = {classes.searchButton} color = \"primary\">\n                            Search\n                        </Button>\n                        </AppBar>\n                        )}\n                        \n                        {(user?.result?.name)&& (              \n                            <Form currentId = {currentId} setCurrentId = {setCurrentId}/> \n                        )}\n\n{(!searchQuery && !tags.length) && (\n              <Paper className={classes.pagination} elevation={6}>\n                <Pagination page={page} />\n              </Paper>\n            )}\n                        </Grid>\n                </Grid>\n            </Container>\n        </Grow>\n    );\n}\n\nexport default Homepage;"]},"metadata":{},"sourceType":"module"}